# Junkyard Tracker - Project Plan

> This project plan outlines the development roadmap for the Junkyard Tracker application, following an Epic -> Story -> Task hierarchy. It is based on the technical design and implementation guide.

## References & Callouts

- **Design Documents:** [SUMMARY.md](./SUMMARY.md), [TECHNICAL_DESIGN.md](./TECHNICAL_DESIGN.md), [IMPLEMENTATION_GUIDE.md](./IMPLEMENTATION_GUIDE.md)
- **Engineering Principles:** SOLID design, DRY, modularity, and maintainability.
- **Testing Philosophy:** A comprehensive, multi-layered testing strategy (Unit, Integration, E2E) is integral to every story.

---

## EPIC 1: Core Application Setup & Foundation

> **Goal:** Initialize the project, configure the development environment, and establish the foundational types and validation schemas that will drive the entire application.

### Story 1.1: Project Initialization

- **Description:** Set up the Next.js project with all required dependencies and configurations for TypeScript, Tailwind CSS, and ESLint.
- **Tasks:**
  - [ ] Initialize Next.js project using `create-next-app`.
  - [ ] Install production dependencies: `react-hook-form`, `@hookform/resolvers`, `zod`, `uuid`, `clsx`, `tailwind-merge`.
  - [ ] Install development dependencies: `vitest`, `@vitest/ui`, `@testing-library/react`, `playwright`, `@types/uuid`, etc.
  - [ ] Configure `tsconfig.json` with strict settings (`strict: true`, `noUncheckedIndexedAccess`).
  - [ ] Configure `tailwind.config.ts`.
  - [ ] Configure `eslint.config.mjs` with rules for exhaustive checks and unused variables.

### Story 1.2: Domain Modeling (Types)

- **Description:** Define all core TypeScript types for the application domain in a centralized `types/index.ts` file.
- **Tasks:**
  - [ ] Create `src/types/index.ts`.
  - [ ] Define and export literal types for enums (`VEHICLE_TYPES`, `ENGINE_STATUSES`, etc.).
  - [ ] Define and export the `Registration` discriminated union (`registered` | `failed`).
  - [ ] Define `VehicleBase` interface.
  - [ ] Define and export vehicle-specific interfaces (`Sedan`, `Coupe`, `MiniVan`, `Motorcycle`).
  - [ ] Define and export the main `Vehicle` discriminated union.
  - [ ] Define and export the generic `Result<T, E>` type for error handling.
  - [ ] Define and export state management types (`VehicleState`, `VehicleFilters`, etc.).

### Story 1.3: Validation Schema Definition

- **Description:** Create a comprehensive set of Zod schemas for validating form inputs and persisted data structures.
- **Tasks:**
  - [ ] Create `src/validations/schemas.ts`.
  - [ ] Implement primitive schemas (`NicknameSchema`, `MileageSchema`).
  - [ ] Implement vehicle-specific schemas (`CarWheelsSchema`, `CoupeDoorsSchema`).
  - [ ] Implement `RegistrationSchema` discriminated union.
  - [ ] Implement `VehicleFormInputSchema` discriminated union for form inputs.
  - [ ] Implement `VehiclePersistedSchema` discriminated union for data storage, including `superRefine` for complex rules like the Mini-van `doorConfig`.
  - [ ] Implement the top-level `StorageSchemaV1` for versioning data in localStorage.

### Story 1.4: Base Testing Setup

- **Description:** Configure the testing frameworks (Vitest and Playwright) and create initial setup files.
- **Tasks:**
  - [ ] Create and configure `vitest.config.ts`.
  - [ ] Create `tests/setup.ts` to mock `localStorage` and `crypto.randomUUID`, and include test cleanup logic.
  - [ ] Create and configure `playwright.config.ts`, including the web server command.
  - [ ] Run `npx playwright install` to install browser dependencies.
  - [ ] Write initial unit tests for Zod schemas in `src/validations/schemas.test.ts` to validate the testing setup.
