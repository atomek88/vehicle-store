# Vehicle Schemas + Defaults (Zod) â€” Junk Yard Tracker (Client-only)

This document defines the **canonical runtime validation** and **default derivation rules** for all vehicle types.

## 1) Design rules

- Validation is client-only (no backend).
- All vehicles are discriminated by `type`:
  - `'sedan' | 'coupe' | 'mini-van' | 'motorcycle'`
- Registration is **immutable** after creation:
  - On create, registration is set once (success or failure) and **cannot be edited**.
  - To get a new registration, the user must delete and recreate the vehicle.
- `nickname` must be **unique** (case-insensitive, trimmed).

## 2) Shared enums and helpers

### Enums

- EngineStatus: `'works' | 'fixable' | 'junk'`
- SeatStatus: `'works' | 'fixable' | 'junk'`
- RegistrationStatus: `'registered' | 'failed'`

### Mileage rating

```ts
export type MileageRating = 'low' | 'medium' | 'high';

export function calculateMileageRating(mileage: number): MileageRating {
  if (mileage < 10000) return 'low';
  if (mileage < 100000) return 'medium';
  return 'high';
}

Nickname normalization

Used for uniqueness:

trim

lowercase

export function normalizeNickname(nickname: string): string {
  return nickname.trim().toLowerCase();
}

3) Form schemas vs persisted schemas

We separate FormInput schemas from PersistedVehicle schemas.

Why?

Form schemas allow missing fields that will be defaulted.

Persisted vehicles always have:

id, createdAt, updatedAt

registration object (status + id OR error)

defaults applied for wheels/doors/engineStatus/seatStatus/etc.
```
